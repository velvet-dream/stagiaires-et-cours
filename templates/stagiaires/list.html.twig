{% extends 'base.html.twig' %}

{% block title %}
    {{title}}
{% endblock %}

{% block main %}
    <h2>
        {{ title }}
    </h2>
    
    <table>
        <tr>
            <th>Nom
            {% if ( order == 'desc' ) %}
                <a href="{{ path('app_stagiaires', { 'order': 'asc' }) }}?nom={{ nom }}">▼</a>
            {% else %}
                <a href="{{ path('app_stagiaires', { 'order': 'desc' }) }}?nom={{ nom }}">▲</a>
            {% endif %}
            </th>
            <th>Préom
            {% if ( order == 'desc' ) %}
                <a href="{{ path('app_stagiaires', { 'order': 'asc' }) }}?prenom={{ prenom }}">▼</a>
            {% else %}
                <a href="{{ path('app_stagiaires', { 'order': 'desc' }) }}?prenom={{ prenom }}">▲</a>
            {% endif %}
            </th>
            <th>Date Naissance</th>
            <th>Voir</th>
        </tr>
    {% for item in stagiaires %}
        <tr>
            <td>{{ item.nom }}</td>
            <td>{{ item.prenom }}</td>
            <td>
                {% if item.datenaissance == null %}
                    Non renseignée
                {% else %}
                    {{ item.datenaissance|format_datetime() }}
                {% endif %}
            </td>
            <th><a href=" {{ path('app_show_stagiaire' , {'id' : item.id })}}">Voir</a></th>
        </tr>
    {% else %}
        Aucun stagiaire n'est inscrit ! 
    {% endfor %}
    </table>
    <form method="GET">
        <label for="nom">Nom</label>
        <input type='text' id="nom" name='nom' placeholder="recherche par nom" value='{{ nom }}'>
        <label for="prenom">Prenom</label>
        <input type='text' id="prenom" name='prenom' placeholder="recherche par prénom" value='{{ prenom }}'>
        <button type="submit" name="submit" value="rechercher">Rechercher</button>
    </form>
{% endblock %}